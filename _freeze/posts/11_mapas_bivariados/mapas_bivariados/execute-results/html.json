{
  "hash": "1163fe099a4b20b8b6a72316c02deda4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Sustentabilidade e Produto Regional: uma leitura bivariada\"\ndescription: \"Mapa bivariado cruzando o índice de sustentabilidade com o PIB per capita nas regiões imediatas brasileiras\"\ndate: 2025-08-06\ncategories: [desenvolvimento regional, indicadores, sustentabilidade, PNDR]\nimage: mapa_bivariado_comp_sust.png\nformat:\n  html:\n    page-layout: full\n    toc: true\n    toc-depth: 2\n    code-fold: true\n    code-summary: \"Exibir código\"\n---\n\n## Indicadores da PNDR: visualizando desigualdades em múltiplas dimensões\n\nO **Painel de Indicadores da Política Nacional de Desenvolvimento Regional (PNDR)** tem como objetivo monitorar o avanço do desenvolvimento regional brasileiro, integrando diversas dimensões estratégicas e alinhado aos **Objetivos do Desenvolvimento Sustentável (ODS)**.\n\nEntre os seus eixos estão:\n\n- Educação e capacitação profissional  \n- Ciência, tecnologia e inovação  \n- Desenvolvimento produtivo  \n- Infraestrutura  \n- Desenvolvimento social  \n- Sustentabilidade  \n- Governança subnacional  \n\nUma forma de visualizar essas dimensões é o uso de **mapas bivariados**, que permitem cruzar dois indicadores simultaneamente e identificar padrões espaciais conjuntos.\n\n---\n\n## Sustentabilidade x PIB per capita\n\nO mapa abaixo cruza duas variáveis:\n\n- O **índice de sustentabilidade regional**, que avalia aspectos ambientais, emissões e uso racional dos recursos\n- O **PIB per capita**, representando a média de renda agregada regional\n\n![](mapa_bivariado_comp_sust.png)\n\n---\n\n### Como interpretar o mapa?\n\nA paleta bivariada indica a combinação entre **baixo, médio e alto** desempenho em cada dimensão:\n\n- **Vermelho**: baixa sustentabilidade  \n- **Azul**: alto PIB per capita  \n- **Roxo escuro**: alto em ambas dimensões  \n- **Cinza claro**: baixo desempenho em ambas  \n\nOs padrões espaciais :\n\n- **Centro-Oeste e Sudeste**: PIB mais elevado, mas com baixa sustentabilidade\n- **Sul e litoral nordestino**: melhores combinações (PIB + sustentabilidade)\n- **Interior do Norte e Nordeste**: persistem em situação crítica em ambas as frentes\n\n---\n\n## Código em R\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Carregar bibliotecas necessárias\nlibrary(geobr)\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(cowplot)\n\n# Nova paleta de cores bivariadas\nbivariate_color_scale <- data.frame(\n  group = c(\"3 - 3\", \"2 - 3\", \"1 - 3\", \n            \"3 - 2\", \"2 - 2\", \"1 - 2\", \n            \"3 - 1\", \"2 - 1\", \"1 - 1\"),\n  fill = c(\"#3F2949\", \"#435786\", \"#4885C1\", \n           \"#77324C\", \"#806A8A\", \"#89A1C8\", \n           \"#AE3A4E\", \"#BC7C8F\", \"#CABED0\")\n)\n\n# Preparar os dados de índice de desenvolvimento\npreparar_dados <- function(indice_desenvolvimento_dimensao) {\n  indice_desenvolvimento_dimensao %>%\n    pivot_wider(\n      names_from = variavel,\n      values_from = indice_medio_dimensao\n    ) %>%\n    mutate(code_imediata = as.character(code_imediata)) %>% # Garantir consistência\n    filter(!is.na(code_imediata)) # Remover linhas inválidas\n}\n\n# Combinar dados e geometria\ncombinar_dados_geometria <- function(dados, mapa_geometria) {\n  mapa_geometria %>%\n    mutate(code_immediate = as.character(code_immediate)) %>% # Garantir consistência\n    left_join(dados, by = c(\"code_immediate\" = \"code_imediata\"))\n}\n\n# Função para criar mapas bivariados entre duas dimensões\ncriar_mapa_bivariado_dimensoes <- function(df, dimensao_x, dimensao_y, output_dir, nome_dimensoes) {\n  # Obter os títulos das dimensões em português\n  titulo_dimensao_x <- nome_dimensoes[[dimensao_x]]\n  titulo_dimensao_y <- nome_dimensoes[[dimensao_y]]\n  \n  # Filtrar os dados e garantir que ambas dimensões sejam numéricas\n  dados_dimensoes <- df %>%\n    mutate(\n      across(all_of(c(dimensao_x, dimensao_y)), as.numeric)\n    ) %>%\n    filter(!is.na(.data[[dimensao_x]]) & !is.na(.data[[dimensao_y]])) # Remover NAs\n  \n  # Criar categorias bivariadas\n  dados_dimensoes <- dados_dimensoes %>%\n    mutate(\n      x_categoria = cut(\n        .data[[dimensao_x]],\n        breaks = quantile(.data[[dimensao_x]], probs = seq(0, 1, length.out = 4), na.rm = TRUE),\n        labels = c(\"1\", \"2\", \"3\"),\n        include.lowest = TRUE\n      ),\n      y_categoria = cut(\n        .data[[dimensao_y]],\n        breaks = quantile(.data[[dimensao_y]], probs = seq(0, 1, length.out = 4), na.rm = TRUE),\n        labels = c(\"1\", \"2\", \"3\"),\n        include.lowest = TRUE\n      ),\n      group = paste(y_categoria, \"-\", x_categoria) # Criar grupos bivariados no formato \"y - x\"\n    )\n  \n  # Criar o mapa bivariado com a geometria\n  mapa <- ggplot(data = dados_dimensoes) +\n    geom_sf(aes(fill = group), color = NA) +\n    scale_fill_manual(\n      values = setNames(bivariate_color_scale$fill, bivariate_color_scale$group), # Mapear cores\n      name = \"Bivariado\"\n    ) +\n    theme_minimal() +\n    theme(\n      legend.position = \"none\",\n      plot.background = element_rect(fill = \"white\", color = NA) # Configurar fundo branco\n    ) +\n    labs(\n      title = paste(\"Mapa Bivariado:\", titulo_dimensao_x, \"x\", titulo_dimensao_y)\n    )\n  \n  # Salvar o mapa com fundo branco\n  output_path <- file.path(output_dir, paste0(\"mapa_bivariado_\", dimensao_x, \"_vs_\", dimensao_y, \".png\"))\n  ggsave(output_path, plot = mapa, width = 12, height = 8, dpi = 300, bg = \"white\")\n}\n\n# Diretório de saída para salvar os mapas\noutput_dir <- \"mapas_bivariados_geobr_corrigidos\"\nif (!dir.exists(output_dir)) {\n  dir.create(output_dir)\n}\n\n# Preparar os dados\ndados_preparados <- preparar_dados(indice_desenvolvimento_dimensao)\n\n# Carregar o shapefile das regiões imediatas\nmapa_imediatas <- read_immediate_region(year = 2020)\n\n# Combinar os dados com a geometria\ndados_geograficos <- combinar_dados_geometria(dados_preparados, mapa_imediatas)\n\n# Lista de nomes das dimensões\nnome_dimensoes <- list(\n  \"comp_citec\" = \"Ciência e Tecnologia\",\n  \"comp_desprod\" = \"Desenvolvimento Produtivo\",\n  \"comp_dessoc\" = \"Desenvolvimento Social\",\n  \"comp_educ\" = \"Educação e Capacitação\",\n  \"comp_governativas\" = \"Governança\",\n  \"comp_infra\" = \"Infraestrutura\",\n  \"comp_sust\" = \"Sustentabilidade\"\n)\n\n# Gerar os mapas para todas as combinações de dimensões\ngerar_mapas_bivariados_todas_combinacoes(dados_geograficos, output_dir, nome_dimensoes)\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}